
import './App.css';
import LineChart from './components/LineChart'
import 'bootstrap/dist/css/bootstrap.min.css';
import Coin from './components/Coin'
import './components/style.css'
import { ExternalLink } from 'react-external-link';
import { useEffect, useState } from 'react';
import Cotacao from './components/Cotacao'


function App() {

    const [moedaUsd, setUsd] = useState(0.00);
    const [moedaEur, setEur] = useState(0.00);
    const [moedaBtc, setBtc] = useState(0.00);
	const [moedaCkn, setCkn] = useState(0.00);
	

	function json2array(json){
		var result = [];
		var keys = Object.keys(json);
		keys.forEach(function(key){
			result.push(json[key]);
		});
		return result;
	}

	// async function fetchMoedas() {
	// 	const response = await fetch('https://economia.awesomeapi.com.br/all/USD-BRL,EUR-BRL,BTC-BRL')
	// 	const json = await response.json
	// 	 await setBtc(json2array(json))
	// 	 await console.log(moedaBtc)
	// }


	useEffect(()=> { 
  
		fetch('https://ckn-api.herokuapp.com/relatorios/diario')
		  .then((r)=> r.json())
		  .then((json)=>{
				json = json.sort((a,b)=> {
						  return a.id - b.id
					  })
			 
				setCkn(json[json.length-1].valor)
			  
			  
		  })
		  
	},[]);
  
  useEffect( () => {
    fetch('https://economia.awesomeapi.com.br/all/USD-BRL,EUR-BRL,BTC-BRL')
        .then((r)=> r.json())
        .then((json)=>{
            setUsd(json2array(json)[0].bid)
			setEur(json2array(json)[1].bid)
			setBtc(json2array(json)[2].bid)
			
			})

	

  		
}, []);







  return (
    <div className="App">


<div class="parent-container">

	<div class="box-container">

	
	<div id="coin">
  	<Coin></Coin>
	</div>
	<div class="header">
		<span>Chikenitos <br/>Coin</span>
	</div>

	<div id="coin">
  	<Coin></Coin>
	</div>

	</div >

	<div class="box-container corpo">
		<div class="content-box">
    <h2 class="valor">
                  R$ 00.00
				 
                </h2>
                <select class="seletor-relatorio">
                  <option value="diario" selected>Diario</option>
                  <option value="semanal" >Semanal</option>
                  <option value="mensal">Mensal</option>
                </select>
                <div class="chart">
                <LineChart></LineChart>
                </div>
		</div>
		<div class="moeda-box">
			<div class="moeda">
				<Cotacao valor={((moedaCkn/moedaBtc)*Math.pow(10,6)).toFixed(2)} nome="Î¼Bitcoin"></Cotacao>
			</div>
				<div class="moeda">
				<Cotacao valor={(moedaCkn/moedaUsd).toFixed(2)} nome="Dolar"></Cotacao>
				</div>

				<div class="moeda">
				<Cotacao valor={(moedaCkn/moedaEur).toFixed(2)} nome="Euro"></Cotacao>
				</div>
			
			
		</div>
	</div>

	


	
	
	
	
</div>
	<div class="footer">

			<div class="footer-content">

				<div class="credits">
					<span>Created and Designed by Daniel Gomes</span>
				</div>
		
				<ExternalLink href="https://github.com/danieldjgomes" className="icon">
					<svg class="iconmonstr-github-3">
						<path id="iconmonstr-github-3" d="M 25.33333396911621 0 L 6.666666984558105 0 C 2.985333442687988 0 0 2.985333442687988 0 6.666666984558105 L 0 25.33333396911621 C 0 29.01466751098633 2.985333442687988 32 6.666666984558105 32 L 25.33333396911621 32 C 29.0160026550293 32 32 29.01466751098633 32 25.33333396911621 L 32 6.666666984558105 C 32 2.985333442687988 29.0160026550293 0 25.33333396911621 0 Z M 19.3786678314209 26.1200008392334 C 18.83866882324219 26.2239990234375 18.66666793823242 25.89200210571289 18.66666793823242 25.60799980163574 L 18.66666793823242 22.68133354187012 C 18.66666793823242 21.68533325195313 18.31733322143555 21.03733444213867 17.93333435058594 20.70666694641113 C 20.30933380126953 20.44266700744629 22.80533409118652 19.54000091552734 22.80533409118652 15.44400024414063 C 22.80533409118652 14.27866744995117 22.38933372497559 13.32666683197021 21.70800018310547 12.58133316040039 C 21.81733512878418 12.3120002746582 22.18266868591309 11.2266674041748 21.6026668548584 9.7586669921875 C 21.6026668548584 9.7586669921875 20.70800018310547 9.472000122070313 18.67200088500977 10.85200023651123 C 17.81866645812988 10.61200046539307 16.90666580200195 10.49600028991699 16 10.49066734313965 C 15.09333324432373 10.49466705322266 14.18133354187012 10.61200046539307 13.32933330535889 10.84933376312256 C 11.29199981689453 9.469333648681641 10.39599990844727 9.756000518798828 10.39599990844727 9.756000518798828 C 9.817333221435547 11.22533321380615 10.18266677856445 12.30933380126953 10.29333305358887 12.57999992370605 C 9.610666275024414 13.32666683197021 9.194666862487793 14.2773323059082 9.194666862487793 15.44266700744629 C 9.194666862487793 19.52799987792969 11.68400001525879 20.44400024414063 14.05466747283936 20.71466636657715 C 13.74933433532715 20.98133277893066 13.47333431243896 21.4506664276123 13.37733364105225 22.14133262634277 C 12.76800060272217 22.41333389282227 11.22533321380615 22.88399887084961 10.27333354949951 21.25333213806152 C 10.27333354949951 21.25333213806152 9.709333419799805 20.22933197021484 8.637332916259766 20.1533317565918 C 8.637332916259766 20.1533317565918 7.597333431243896 20.13999938964844 8.564000129699707 20.80266571044922 C 8.564000129699707 20.80266571044922 9.263999938964844 21.13066673278809 9.749333381652832 22.36266708374023 C 9.749333381652832 22.36266708374023 10.36666679382324 24.26666641235352 13.33333396911621 23.62133407592773 L 13.33333396911621 25.60666656494141 C 13.33333396911621 25.88800048828125 13.16133403778076 26.21866607666016 12.62933349609375 26.1200008392334 C 8.389333724975586 24.71066856384277 5.333333492279053 20.71200180053711 5.333333492279053 16 C 5.333333492279053 10.10799980163574 10.10933303833008 5.333333492279053 16 5.333333492279053 C 21.89066696166992 5.333333492279053 26.66666793823242 10.10800075531006 26.66666793823242 16 C 26.66666793823242 20.71066665649414 23.61466789245605 24.70800018310547 19.3786678314209 26.1200008392334 Z">
						</path>
					</svg>
		</ExternalLink>


					<ExternalLink href="https://www.linkedin.com/in/danieldjgomes/" className="icon">

				<svg class="linkedin">
					<path id="linkedin" d="M 29.42998886108398 0 L 2.926947355270386 0 C 1.310455799102783 0 0 1.296000003814697 0 2.894659757614136 L 0 29.10525703430176 C 0 30.70399856567383 1.310455799102783 32 2.926947355270386 32 L 29.42990303039551 32 C 31.04647636413574 32 32.35693359375 30.70399856567383 32.35693359375 29.10525703430176 L 32.35693359375 2.894659757614136 C 32.35693359375 1.296000003814697 31.04647636413574 0 29.42998886108398 0 Z M 10.01260757446289 27.63091087341309 C 10.01260757446289 28.09616661071777 9.631270408630371 28.47329902648926 9.160823822021484 28.47329902648926 L 5.534984111785889 28.47329902648926 C 5.06453800201416 28.47329902648926 4.683200359344482 28.09616661071777 4.683200359344482 27.63091087341309 L 4.683200359344482 12.59920406341553 C 4.683200359344482 12.13394737243652 5.06453800201416 11.75681686401367 5.534984111785889 11.75681686401367 L 9.160823822021484 11.75681686401367 C 9.631270408630371 11.75681686401367 10.01260757446289 12.13394737243652 10.01260757446289 12.59920406341553 L 10.01260757446289 27.63091087341309 Z M 7.347904205322266 10.33985328674316 C 5.445536613464355 10.33985328674316 3.90333080291748 8.814659118652344 3.90333080291748 6.933277130126953 C 3.90333080291748 5.051895141601563 5.445536613464355 3.5267014503479 7.347904205322266 3.5267014503479 C 9.250271797180176 3.5267014503479 10.79247760772705 5.051895141601563 10.79247760772705 6.933277130126953 C 10.79247760772705 8.814659118652344 9.25035572052002 10.33985328674316 7.347904205322266 10.33985328674316 Z M 28.96115112304688 27.69876480102539 C 28.96115112304688 28.12649154663086 28.61047554016113 28.47329902648926 28.17797660827637 28.47329902648926 L 24.28718376159668 28.47329902648926 C 23.85468482971191 28.47329902648926 23.50400924682617 28.12649154663086 23.50400924682617 27.69876480102539 L 23.50400924682617 20.64804267883301 C 23.50400924682617 19.59622955322266 23.81597518920898 16.0389518737793 20.72461700439453 16.0389518737793 C 18.32673072814941 16.0389518737793 17.84036064147949 18.47380065917969 17.74269676208496 19.56649208068848 L 17.74269676208496 27.69876480102539 C 17.74269676208496 28.12649154663086 17.3921070098877 28.47329902648926 16.95952415466309 28.47329902648926 L 13.1964635848999 28.47329902648926 C 12.76396465301514 28.47329902648926 12.41329002380371 28.12649154663086 12.41329002380371 27.69876480102539 L 12.41329002380371 12.53135108947754 C 12.41329002380371 12.10362243652344 12.76396465301514 11.75681686401367 13.1964635848999 11.75681686401367 L 16.95952415466309 11.75681686401367 C 17.39202308654785 11.75681686401367 17.74269676208496 12.10362243652344 17.74269676208496 12.53135108947754 L 17.74269676208496 13.84276390075684 C 18.63183403015137 12.5231409072876 19.95321846008301 11.5045862197876 22.76666259765625 11.5045862197876 C 28.9968147277832 11.5045862197876 28.96115493774414 17.26090049743652 28.96115493774414 20.4237060546875 L 28.96115112304688 27.69876480102539 L 28.96115112304688 27.69876480102539 Z">
					</path>
				</svg>
		</ExternalLink>

			</div>
			
			
	</div>

        
  </div>
   
  );
}

export default App;
